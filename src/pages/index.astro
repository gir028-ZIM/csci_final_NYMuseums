---
import Layout from '../layouts/Layout.astro';
import MuseumCard from '../components/MuseumCard.astro';
import museums from '../data/museums_clean.json';

interface Museum {
  the_geom: string;
  name: string;
  tel: string;
  url: string;
  address1: string;
  address2: string;
  city: string;
  zip: string;
  image?: string;
}

const rows = Array.isArray(museums as any) ? (museums as any) : ((museums as any).data || []);

const museumList: Museum[] = rows.map((row: any) => ({
  the_geom: row.the_geom ?? row[8],
  name: row.name ?? row[9],
  tel: row.tel ?? row[10],
  url: row.url ?? row[11],
  address1: row.address1 ?? row[12] ?? row.adress1 ?? '',
  address2: row.address2 ?? row[13] ?? '',
  city: row.city ?? row[14] ?? '',
  zip: row.zip ?? row[15] ?? '',
  image: row.image ?? ''
}));
---

<Layout title="NYC Museums Directory">
  <header>
    <h1>üèõÔ∏è Gianna's NYC Museums Directory</h1>
    <p>Welcome to my website for exploring museums across New York City.
      This is for Harvard Extension School's CSCI E-12 Class
    </p>
  </header>
  
  <nav>
    <ul>
      <li><a href="/">Home</a></li>
      <li><a href="/locations/">By Location</a></li>
      <li><a href="/categories/">By Category</a></li>
      <li><a href="/reviews/">Reviews</a></li>
    </ul>
  </nav>
  
  <section class="stats">
    <h2>Museums Found</h2>
    <p>{museumList.length} Museums</p>
  </section>
  
  <div class="museums-grid">
    {museumList.map((museum) => (
      <MuseumCard 
        name={museum.name}
        address1={museum.address1}
        city={museum.city}
        zip={museum.zip}
        tel={museum.tel}
        url={museum.url}
        image={museum.image}
      />
    ))}
  </div>
  
  <footer>
    <p>&copy; 2025 NYC Museums Directory | Data from NYC OpenData</p>
  </footer>
</Layout>

<style>
  header {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 2rem 1rem;
    text-align: center;
    margin: -20px -20px 2rem -20px;
    padding-left: calc(1rem + 20px);
    padding-right: calc(1rem + 20px);
  }
  
  header h1 {
    font-size: 2.5rem;
    margin-bottom: 0.5rem;
  }
  
  header p {
    font-size: 1.1rem;
    opacity: 0.9;
  }
  
  nav {
    background-color: white;
    padding: 1rem;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    margin-bottom: 2rem;
  }
  
  nav ul {
    list-style: none;
    display: flex;
    gap: 2rem;
    justify-content: center;
    flex-wrap: wrap;
  }
  
  nav a {
    color: #667eea;
    text-decoration: none;
    font-weight: 500;
    transition: color 0.3s;
  }
  
  nav a:hover {
    color: #764ba2;
  }
  
  .stats {
    background: white;
    padding: 2rem;
    border-radius: 8px;
    margin-bottom: 2rem;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    text-align: center;
  }
  
  .stats h2 {
    color: #667eea;
    margin-bottom: 0.5rem;
  }
  
  .stats p {
    font-size: 1.5rem;
    font-weight: bold;
    color: #764ba2;
  }
  
  .museums-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 2rem;
    margin-bottom: 3rem;
  }
  
  @media (max-width: 1200px) {
    .museums-grid {
      grid-template-columns: repeat(3, 1fr);
    }
  }
  
  @media (max-width: 768px) {
    .museums-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }
  
  @media (max-width: 480px) {
    .museums-grid {
      grid-template-columns: 1fr;
    }
  }
  
  footer {
    background-color: #333;
    color: white;
    text-align: center;
    padding: 2rem;
    margin: 3rem -20px -20px -20px;
  }
</style>
